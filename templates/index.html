<!doctype html>
<html>
  <head>
    <title>The Gospel of the Real | Dashboard</title>
    <link rel="stylesheet" href="/static/dashboard_style.css" />
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  </head>
  <body>
    <div class="dashboard-wrapper">
      <nav class="chapter-nav">
        <header class="nav-header">
          <h1 class="nav-title" id="navTitle">
            <span class="nav-title-label">The</span>
            <span class="nav-title-accent">Got<em>R</em></span>
          </h1>
          {% if dev %}
          <div class="admin-links">
            <a href="/gen" class="admin-link">üõ†Ô∏è Studio</a>
          </div>
          {% endif %}
        </header>
        <div id="chapterCardsContainer" class="cards-list"></div>
      </nav>

      <main class="content-detail">
        <div id="welcomeScreen" class="carousel-container">
          <div class="carousel-wrapper">
            <button id="prevBtn" class="carousel-btn prev-btn">‚ùÆ</button>
            <div class="carousel-track" id="carouselTrack"></div>
            <button id="nextBtn" class="carousel-btn next-btn">‚ùØ</button>
          </div>
          <div class="carousel-indicators" id="carouselIndicators"></div>
        </div>

        <div id="chapterDetail" style="display: none">
          <header class="detail-header">
            <div class="badge-container">
              <span id="originalTopic" class="topic-badge"></span>
              <span class="ideology-pill" onclick="openIdeologyModal()"
                >Ryan's Ideology üîç</span
              >
            </div>

            <h1 id="gospelTitle"></h1>
            <p id="gospelSubtitle" class="subtitle-text"></p>

            <div class="summary-container-styled">
              <div class="container-label">Chapter Summary</div>
              <div id="narrativeSummary"></div>
            </div>
          </header>

          <section class="manuscript-section locked" id="manuscriptSection">
            <div id="manuscript" class="manuscript-view"></div>
            <div
              class="manuscript-overlay"
              id="unlockOverlay"
              onclick="unlockManuscript()"
            >
              <button class="unlock-btn">Reveal Full Manuscript</button>
            </div>
          </section>

          <div
            id="ideologyModal"
            class="modal-overlay"
            onclick="closeIdeologyModal()"
          >
            <div class="modal-content" onclick="event.stopPropagation()">
              <div class="modal-header">
                <h3>The Ryan Ideology</h3>
                <button class="close-modal" onclick="closeIdeologyModal()">
                  √ó
                </button>
              </div>
              <div id="ideologyModalBody" class="ideology-box"></div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <footer id="globalPlayer" class="sticky-footer" style="display: none">
      <div class="player-rail">
        <div class="player-info">
          <span id="playerTitle" class="footer-chapter-title"
            >Chapter Title</span
          >
          <span id="playerStatus" class="footer-status">Ready</span>
        </div>

        <div class="player-core">
          <div class="controls-row">
            <button id="playPauseBtn" class="main-control-btn">
              <svg id="playIcon" viewBox="0 0 24 24">
                <path d="M8 5v14l11-7z" />
              </svg>
              <svg id="pauseIcon" viewBox="0 0 24 24" style="display: none">
                <path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" />
              </svg>
            </button>
          </div>

          <div class="seek-row">
            <span id="currentTime" class="time-stamp">0:00</span>
            <input
              type="range"
              id="seekSlider"
              class="custom-slider"
              value="0"
              step="1"
            />
            <span id="durationTime" class="time-stamp">0:00</span>
          </div>
        </div>

        <div class="player-actions">
          <a id="downloadLink" href="#" download class="icon-btn">
            <svg
              width="18"
              height="18"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"
              />
            </svg>
          </a>
        </div>
      </div>
      <audio id="fullPlayer" style="display: none"></audio>
    </footer>

    <script src="/static/dashboard_script.js"></script>
  </body>
</html>
